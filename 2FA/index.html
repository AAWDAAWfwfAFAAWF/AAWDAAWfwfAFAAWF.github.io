<html>
<head>
    <title>Encode/Decode</title>
</head>
<body>

    <h2>Encode/Decode</h2>
    
    <textarea id="input" rows="8" cols="60" placeholder="Type here..."></textarea>

    <p><strong>Result:</strong> (Click to copy)</p>
    <div id="output" style="border: 1px solid black; padding: 10px; min-height: 50px; font-size: 20px; word-wrap: break-word; cursor: pointer; transition: background-color 0.1s;"></div>

    <script>
        const map = {
            'a': 'ð“€', 'b': 'â§Š', 'c': 'â§‹', 'd': 'â§Œ', 'e': 'â§', 'f': 'â§Ž', 'g': 'â§', 'h': 'Ñ”',
            'i': 'â§', 'j': 'â§‘', 'k': 'â§’', 'l': 'â§“', 'm': 'â§”', 'n': 'â§•', 'o': 'â§–', 'p': 'â§—',
            'q': 'â§˜', 'r': 'â§™', 's': 'â§š', 't': 'â§›', 'u': 'â§œ', 'v': 'â§', 'w': 'â§ž', 'x': 'â§Ÿ',
            'y': 'â§ ', 'z': 'â§¡',
            'A': 'â€', 'B': 'â', 'C': 'â‚', 'D': 'âƒ', 'E': 'â„', 'F': 'â…', 'G': 'â†', 'H': 'â‡',
            'I': 'âˆ', 'J': 'â‰', 'K': 'âŠ', 'L': 'â‹', 'M': 'âŒ', 'N': 'â', 'O': 'âŽ', 'P': 'â',
            'Q': 'â', 'R': 'â‘', 'S': 'â’', 'T': 'â“', 'U': 'â”', 'V': 'â•', 'W': 'â–', 'X': 'â—',
            'Y': 'â˜', 'Z': 'â™',
            '1': 'â™ ', '2': 'â™£', '3': 'â™¥', '4': 'â™¦', '5': 'â—Š', '6': 'â—‹', '7': 'â—˜', '8': 'â—™', '9': 'â—¸', '0': 'â—¹',
            ' ': 'âŠ¹'
        };

        const reverseMap = {};
        for (let key in map) {
            reverseMap[map[key]] = key;
        }

        const inputField = document.getElementById('input');
        const outputField = document.getElementById('output');

        inputField.addEventListener('input', function() {
            const val = inputField.value;
            if (!val) { outputField.innerText = ""; return; }

            const hasLettersOrNumbers = /[a-zA-Z0-9]/.test(val);
            let result = "";

            if (hasLettersOrNumbers) {
                for (let char of val) { result += map[char] || char; }
            } else {
                for (let char of val) { result += reverseMap[char] || char; }
            }
            outputField.innerText = result;
        });

        outputField.addEventListener('click', function() {
            const text = outputField.innerText;
            if (!text) return;

            // Fallback copy method for environments where navigator.clipboard fails
            function fallbackCopy(val) {
                const textArea = document.createElement("textarea");
                textArea.value = val;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {}
                document.body.removeChild(textArea);
            }

            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(highlight).catch(() => {
                    fallbackCopy(text);
                    highlight();
                });
            } else {
                fallbackCopy(text);
                highlight();
            }

            function highlight() {
                outputField.style.backgroundColor = "#ffff00";
                setTimeout(() => {
                    outputField.style.backgroundColor = "transparent";
                }, 150);
            }
        });
    </script>

</body>
</html>
